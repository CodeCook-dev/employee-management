<div class="employee-form-view">
  <form
    class="employee-form"
    (ngSubmit)="saveEmployee()"
    #employeeForm="ngForm"
  >
    <div class="form-group">
      <div class="input-with-icon">
        <app-person-icon />
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Employee name"
          [(ngModel)]="employee.name"
          [readonly]="!canEdit()"
          [class.readonly]="!canEdit()"
          required
        />
      </div>
    </div>

    <div class="form-group">
      <div class="input-with-icon">
        <app-role-icon />
        <!-- Mobile Select -->
        <app-mobile-select
          *ngIf="isMobile"
          [options]="roleOptions"
          [selectedValue]="employee.role"
          [placeholder]="'Select role'"
          [title]="'Select Role'"
          [disabled]="!canEdit()"
          (valueChange)="onRoleChange($event)"
        />
        <!-- Desktop/Tablet Select -->
        <select
          *ngIf="!isMobile"
          id="role"
          name="role"
          [(ngModel)]="employee.role"
          [disabled]="!canEdit()"
          [class.disabled]="!canEdit()"
          required
        >
          <option value="Product Designer">Product Designer</option>
          <option value="Flutter Developer">Flutter Developer</option>
          <option value="QA Tester">QA Tester</option>
          <option value="Product Owner">Product Owner</option>
        </select>
      </div>
    </div>

    <div class="form-row">
      <app-date-picker
        [defaultDate]="getStartDateForPicker()"
        [variant]="'start'"
        (dateChange)="onStartDateChange($event)"
        [disabled]="!canEdit()"
      />

      <div class="date-separator">
        <app-arrow-icon />
      </div>

      <app-date-picker
        [minDate]="getStartDateForPicker()"
        [defaultDate]="getEndDateForPicker()"
        [variant]="'end'"
        (dateChange)="onEndDateChange($event)"
        [disabled]="!canEdit()"
      />
    </div>

    <!-- Hidden inputs for form validation -->
    <input
      type="hidden"
      name="startDate"
      [(ngModel)]="employee.startDate"
      required
    />
    <input type="hidden" name="endDate" [(ngModel)]="employee.endDate" />
    <input
      *ngIf="isMobile"
      type="hidden"
      name="role"
      [(ngModel)]="employee.role"
      required
    />

    <div class="form-actions" *ngIf="canEdit()">
      <button type="button" class="btn btn-secondary" (click)="goBack()">
        Cancel
      </button>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="!employeeForm.valid"
      >
        Save
      </button>
      <!-- Delete button for tablet and desktop when editing existing employee -->
      <button
        *ngIf="!isMobile && isEditMode && currentEmployeeId"
        type="button"
        class="btn btn-danger"
        (click)="deleteEmployee()"
      >
        Delete Employee
      </button>
    </div>

    <div class="form-actions" *ngIf="!canEdit()">
      <button type="button" class="btn btn-primary" (click)="goBack()">
        Back to List
      </button>
    </div>
  </form>
</div>

<!-- Show Remove Confirmation Component for Tablet and Desktop -->
<app-show-remove-confirmation
  [isVisible]="showRemoveConfirmation"
  (undo)="undoDelete()"
  (close)="closeRemoveConfirmation()"
></app-show-remove-confirmation>
